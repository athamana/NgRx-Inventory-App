(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{WLUK:function(e,t,c){"use strict";c.r(t),c.d(t,"ProductsModule",function(){return Ce});var r={};c.r(r),c.d(r,"toggleProductCode",function(){return a}),c.d(r,"setCurrentProduct",function(){return u}),c.d(r,"clearCurrentProduct",function(){return n}),c.d(r,"initializeCurrentProduct",function(){return l}),c.d(r,"loadProducts",function(){return p}),c.d(r,"updateProduct",function(){return b}),c.d(r,"createProduct",function(){return h}),c.d(r,"deleteProduct",function(){return P});var d={};c.r(d),c.d(d,"loadProductsSuccess",function(){return g}),c.d(d,"loadProductsFailure",function(){return f}),c.d(d,"updateProductSuccess",function(){return m}),c.d(d,"updateProductFailure",function(){return C}),c.d(d,"createProductSuccess",function(){return O}),c.d(d,"createProductFailure",function(){return j}),c.d(d,"deleteProductSuccess",function(){return y}),c.d(d,"deleteProductFailure",function(){return S});var o=c("tyNb"),s=c("PCNd"),i=c("l7P3");const a=Object(i.n)("[Product Page] Toggle Product Code"),u=Object(i.n)("[Product Page] Set Current Product",Object(i.s)()),n=Object(i.n)("[Product Page] Clear Current Product"),l=Object(i.n)("[Product Page] Initialize Current Product"),p=Object(i.n)("[Product Page] Load"),b=Object(i.n)("[Product Page] Update Product",Object(i.s)()),h=Object(i.n)("[Product Page] Create Product",Object(i.s)()),P=Object(i.n)("[Product Page] Delete Product",Object(i.s)()),g=Object(i.n)("[Product API] Load Success",Object(i.s)()),f=Object(i.n)("[Product API] Load Fail",Object(i.s)()),m=Object(i.n)("[Product API] Update Product Success",Object(i.s)()),C=Object(i.n)("[Product API] Update Product Fail",Object(i.s)()),O=Object(i.n)("[Product API] Create Product Success",Object(i.s)()),j=Object(i.n)("[Product API] Create Product Fail",Object(i.s)()),y=Object(i.n)("[Product API] Delete Product Success",Object(i.s)()),S=Object(i.n)("[Product API] Delete Product Fail",Object(i.s)()),v=Object(i.p)({showProductCode:!0,currentProductId:null,products:[],error:""},Object(i.r)(r.toggleProductCode,e=>Object.assign(Object.assign({},e),{showProductCode:!e.showProductCode})),Object(i.r)(r.setCurrentProduct,(e,t)=>Object.assign(Object.assign({},e),{currentProductId:t.currentProductId})),Object(i.r)(r.clearCurrentProduct,e=>Object.assign(Object.assign({},e),{currentProductId:null})),Object(i.r)(r.initializeCurrentProduct,e=>Object.assign(Object.assign({},e),{currentProductId:0})),Object(i.r)(d.loadProductsSuccess,(e,t)=>Object.assign(Object.assign({},e),{products:t.products,error:""})),Object(i.r)(d.loadProductsFailure,(e,t)=>Object.assign(Object.assign({},e),{products:[],error:t.error})),Object(i.r)(d.updateProductSuccess,(e,t)=>{const c=e.products.map(e=>t.product.id===e.id?t.product:e);return Object.assign(Object.assign({},e),{products:c,currentProductId:t.product.id,error:""})}),Object(i.r)(d.updateProductFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error})),Object(i.r)(d.createProductSuccess,(e,t)=>Object.assign(Object.assign({},e),{products:[...e.products,t.product],currentProductId:t.product.id,error:""})),Object(i.r)(d.createProductFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error})),Object(i.r)(d.deleteProductSuccess,(e,t)=>Object.assign(Object.assign({},e),{products:e.products.filter(e=>e.id!==t.productId),currentProductId:null,error:""})),Object(i.r)(d.deleteProductFailure,(e,t)=>Object.assign(Object.assign({},e),{error:t.error})));var I=c("9jGm"),w=c("5+tZ"),T=c("lJxs"),N=c("JIr8"),M=c("bOdf"),x=c("vkgz"),F=c("LRne"),$=c("fXoL"),k=c("tk/3"),E=c("z6cu");let R=(()=>{class e{constructor(e){this.http=e,this.productsUrl="api/products"}getProducts(){return this.http.get(this.productsUrl).pipe(Object(N.a)(this.handleError))}createProduct(e){const t=new k.d({"Content-Type":"application/json"}),c=Object.assign(Object.assign({},e),{id:null});return this.http.post(this.productsUrl,c,{headers:t}).pipe(Object(N.a)(this.handleError))}deleteProduct(e){const t=new k.d({"Content-Type":"application/json"});return this.http.delete(`${this.productsUrl}/${e}`,{headers:t}).pipe(Object(N.a)(this.handleError))}updateProduct(e){const t=new k.d({"Content-Type":"application/json"});return this.http.put(`${this.productsUrl}/${e.id}`,e,{headers:t}).pipe(Object(T.a)(()=>e),Object(N.a)(this.handleError))}handleError(e){let t;return t=e.error instanceof ErrorEvent?"An error occurred: "+e.error.message:`Backend returned code ${e.status}: ${e.body.error}`,console.error(e),Object(E.a)(t)}}return e.\u0275fac=function(t){return new(t||e)($.Xb(k.b))},e.\u0275prov=$.Jb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var z=c("7zfz");let G=(()=>{class e{constructor(e,t,c){this.actions$=e,this.productService=t,this.messageService=c,this.loadProducts$=Object(I.c)(()=>this.actions$.pipe(Object(I.d)(r.loadProducts),Object(w.a)(()=>this.productService.getProducts().pipe(Object(T.a)(e=>d.loadProductsSuccess({products:e})),Object(N.a)(e=>Object(F.a)(d.loadProductsFailure({error:e}))))))),this.updateProduct$=Object(I.c)(()=>this.actions$.pipe(Object(I.d)(r.updateProduct),Object(M.a)(e=>this.productService.updateProduct(e.product).pipe(Object(x.a)(e=>this.messageService.add({severity:"success",summary:"Success",detail:e.productName+" updated successfully"})),Object(T.a)(e=>d.updateProductSuccess({product:e})),Object(N.a)(e=>Object(F.a)(d.updateProductFailure({error:e}))))))),this.createProduct$=Object(I.c)(()=>this.actions$.pipe(Object(I.d)(r.createProduct),Object(M.a)(e=>this.productService.createProduct(e.product).pipe(Object(x.a)(e=>this.messageService.add({severity:"success",summary:"Success",detail:e.productName+" created successfully"})),Object(T.a)(e=>d.createProductSuccess({product:e})),Object(N.a)(e=>Object(F.a)(d.createProductFailure({error:e}))))))),this.deleteProduct$=Object(I.c)(()=>this.actions$.pipe(Object(I.d)(r.deleteProduct),Object(w.a)(e=>this.productService.deleteProduct(e.productId).pipe(Object(x.a)(()=>this.messageService.add({severity:"success",summary:"Success",detail:"Deleted successfully"})),Object(T.a)(()=>d.deleteProductSuccess({productId:e.productId})),Object(N.a)(e=>Object(F.a)(d.deleteProductFailure({error:e})))))))}}return e.\u0275fac=function(t){return new(t||e)($.Xb(I.a),$.Xb(R),$.Xb(z.g))},e.\u0275prov=$.Jb({token:e,factory:e.\u0275fac}),e})();const A=Object(i.o)("products"),q=Object(i.q)(A,e=>e.showProductCode),U=Object(i.q)(A,e=>e.currentProductId),L=Object(i.q)(A,U,(e,t)=>0===t?{id:0,productName:"",productCode:"New",description:"",starRating:0}:t?e.products.find(e=>e.id===t):null),D=Object(i.q)(A,e=>[...e.products]),J=Object(i.q)(A,e=>e.error);var W=c("ofXK"),B=c("cQJI"),V=c("jIHw"),X=c("dts7");function _(e,t){if(1&e&&($.Tb(0,"div"),$.Gc(1),$.Sb()),2&e){const e=$.dc(2);$.Cb(1),$.Hc(e.errorMessage)}}function H(e,t){1&e&&($.Tb(0,"p-messages",6),$.Ec(1,_,2,1,"ng-template",7),$.Sb())}function K(e,t){if(1&e&&($.Rb(0),$.Gc(1),$.Qb()),2&e){const e=$.dc().$implicit;$.Cb(1),$.Ic(" (",e.productCode,") ")}}function Q(e,t){if(1&e&&($.Tb(0,"div"),$.Gc(1),$.Ec(2,K,2,1,"ng-container",8),$.Sb()),2&e){const e=t.$implicit,c=$.dc();$.Cb(1),$.Ic(" ",e.productName," "),$.Cb(1),$.lc("ngIf",c.displayCode)}}const Z=function(){return{height:"auto"}},Y=function(e){return[e]},ee=function(){return{"min-width":"300px"}};let te=(()=>{class e{constructor(){this.pageTitle="Products",this.displayCodeChanged=new $.n,this.initializeNewProduct=new $.n,this.productWasSelected=new $.n}checkChanged(){this.displayCodeChanged.emit()}newProduct(){this.initializeNewProduct.emit()}productSelected(e){e?this.productWasSelected.emit(e):this.newProduct()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=$.Hb({type:e,selectors:[["app-product-list"]],inputs:{errorMessage:"errorMessage",products:"products",displayCode:"displayCode",selectedProduct:"selectedProduct"},outputs:{displayCodeChanged:"displayCodeChanged",initializeNewProduct:"initializeNewProduct",productWasSelected:"productWasSelected"},decls:8,vars:11,consts:[["severity","error",4,"ngIf"],["filterBy","productName","filterPlaceholder","Filter by name","metaKeySelection","false","controlsPosition","right",3,"value","listStyle","header","selection","onSelectionChange"],["pTemplate","item"],[1,"bottom-actions","p-d-flex","p-ai-center"],["type","button","pButton","","label","Add","icon","pi pi-plus",2,"margin","0.25em","min-width","90px",3,"click"],["type","checkbox",3,"checked","change"],["severity","error"],["pTemplate",""],[4,"ngIf"]],template:function(e,t){1&e&&($.Ec(0,H,2,0,"p-messages",0),$.Tb(1,"p-orderList",1),$.ac("onSelectionChange",function(e){return t.productSelected(e.value[0])}),$.Ec(2,Q,3,2,"ng-template",2),$.Sb(),$.Tb(3,"div",3),$.Tb(4,"button",4),$.ac("click",function(){return t.newProduct()}),$.Sb(),$.Tb(5,"label"),$.Tb(6,"input",5),$.ac("change",function(){return t.checkChanged()}),$.Sb(),$.Gc(7," Display Product Code "),$.Sb(),$.Sb()),2&e&&($.lc("ngIf",t.errorMessage),$.Cb(1),$.lc("value",t.products)("listStyle",$.nc(7,Z))("header",t.pageTitle)("selection",$.oc(8,Y,t.selectedProduct))("listStyle",$.nc(10,ee)),$.Cb(5),$.lc("checked",t.displayCode))},directives:[W.l,B.a,z.i,V.a,X.a],styles:["input[type=checkbox][_ngcontent-%COMP%]{transform:scale(1.5);padding:10px}.bottom-actions[_ngcontent-%COMP%]{padding-top:10px}"]}),e})();var ce=c("3Pt+"),re=c("QEVK");class de{static range(e,t){return c=>c.value&&(isNaN(c.value)||c.value<e||c.value>t)?{range:!0}:null}}var oe=c("QIUk"),se=c("7kUa"),ie=c("Js94"),ae=c("zFJ7");function ue(e,t){if(1&e&&($.Tb(0,"small",21),$.Gc(1),$.Sb()),2&e){const e=$.dc(2);$.Cb(1),$.Ic("",e.displayMessage.productName," ")}}function ne(e,t){if(1&e&&($.Tb(0,"small",22),$.Gc(1),$.Sb()),2&e){const e=$.dc(2);$.Cb(1),$.Ic("",e.displayMessage.productCode," ")}}function le(e,t){if(1&e&&($.Tb(0,"small",23),$.Gc(1),$.Sb()),2&e){const e=$.dc(2);$.Cb(1),$.Ic(" ",e.displayMessage.starRating," ")}}function pe(e,t){if(1&e&&($.Tb(0,"small",24),$.Gc(1),$.Sb()),2&e){const e=$.dc(2);$.Cb(1),$.Ic("",e.displayMessage.description," ")}}const be=function(e){return{"p-invalid":e}};function he(e,t){if(1&e){const e=$.Ub();$.Tb(0,"p-card",2),$.Tb(1,"form",3),$.ac("ngSubmit",function(){return $.xc(e),$.dc().saveProduct()}),$.Tb(2,"div",4),$.Tb(3,"div",5),$.Tb(4,"label",6),$.Gc(5,"Product Name"),$.Sb(),$.Tb(6,"input",7),$.ac("blur",function(){return $.xc(e),$.dc().blur()}),$.Sb(),$.Ec(7,ue,2,1,"small",8),$.Sb(),$.Tb(8,"div",5),$.Tb(9,"label",9),$.Gc(10,"Product Code"),$.Sb(),$.Tb(11,"input",10),$.ac("blur",function(){return $.xc(e),$.dc().blur()}),$.Sb(),$.Ec(12,ne,2,1,"small",11),$.Sb(),$.Tb(13,"div",5),$.Tb(14,"label",12),$.Gc(15,"Star Rating (1-5)"),$.Sb(),$.Ob(16,"p-rating",13),$.Ec(17,le,2,1,"small",14),$.Sb(),$.Tb(18,"div",5),$.Tb(19,"label",15),$.Gc(20,"Product Description"),$.Sb(),$.Tb(21,"textarea",16),$.ac("blur",function(){return $.xc(e),$.dc().blur()}),$.Sb(),$.Ec(22,pe,2,1,"small",17),$.Sb(),$.Sb(),$.Ob(23,"button",18),$.Tb(24,"button",19),$.ac("click",function(){return $.xc(e),$.dc().cancelEdit()}),$.Sb(),$.Tb(25,"button",20),$.ac("click",function(){return $.xc(e),$.dc().deleteProduct()}),$.Sb(),$.Sb(),$.Sb()}if(2&e){const e=$.dc();$.lc("header",e.pageTitle),$.Cb(1),$.lc("formGroup",e.productForm),$.Cb(5),$.lc("ngClass",$.oc(11,be,e.displayMessage.productName)),$.Cb(1),$.lc("ngIf",e.displayMessage.productName),$.Cb(4),$.lc("ngClass",$.oc(13,be,e.displayMessage.productCode)),$.Cb(1),$.lc("ngIf",e.displayMessage.productCode),$.Cb(5),$.lc("ngIf",e.displayMessage.starRating),$.Cb(4),$.lc("ngClass",$.oc(15,be,e.displayMessage.description))("rows",3),$.Cb(1),$.lc("ngIf",e.displayMessage.description),$.Cb(1),$.lc("disabled",!e.productForm.valid||!e.productForm.dirty)}}let Pe=(()=>{class e{constructor(e){this.fb=e,this.pageTitle="Product Edit",this.create=new $.n,this.update=new $.n,this.delete=new $.n,this.clearCurrent=new $.n,this.displayMessage={},this.validationMessages={productName:{required:"Product name is required.",minlength:"Product name must be at least three characters.",maxlength:"Product name cannot exceed 50 characters."},productCode:{required:"Product code is required."},starRating:{range:"Rate the product between 1 (lowest) and 5 (highest)."}},this.genericValidator=new re.a(this.validationMessages)}ngOnInit(){this.productForm=this.fb.group({productName:["",[ce.o.required,ce.o.minLength(3),ce.o.maxLength(50)]],productCode:["",ce.o.required],starRating:["",de.range(1,5)],description:""}),this.productForm.valueChanges.subscribe(()=>this.displayMessage=this.genericValidator.processMessages(this.productForm))}ngOnChanges(e){e.selectedProduct&&this.displayProduct(e.selectedProduct.currentValue)}blur(){this.displayMessage=this.genericValidator.processMessages(this.productForm)}displayProduct(e){e&&this.productForm&&(this.productForm.reset(),this.pageTitle=0===e.id?"Add Product":"Edit Product: "+e.productName,this.productForm.patchValue({productName:e.productName,productCode:e.productCode,starRating:e.starRating,description:e.description}))}cancelEdit(){this.displayProduct(this.selectedProduct)}deleteProduct(){this.selectedProduct&&this.selectedProduct.id?this.delete.emit(this.selectedProduct):this.clearCurrent.emit()}saveProduct(){if(this.productForm.valid&&this.productForm.dirty){const e=Object.assign(Object.assign({},this.selectedProduct),this.productForm.value);0===e.id?this.create.emit(e):this.update.emit(e)}}}return e.\u0275fac=function(t){return new(t||e)($.Nb(ce.b))},e.\u0275cmp=$.Hb({type:e,selectors:[["app-product-edit"]],inputs:{errorMessage:"errorMessage",selectedProduct:"selectedProduct"},outputs:{create:"create",update:"update",delete:"delete",clearCurrent:"clearCurrent"},features:[$.Ab],decls:2,vars:1,consts:[[1,"edit-container"],[3,"header",4,"ngIf"],[3,"header"],["novalidate","","autocomplete","off",3,"formGroup","ngSubmit"],[1,"p-fluid"],[1,"p-field"],["for","productNameId"],["id","productNameId","type","text","placeholder","Name (required)","formControlName","productName","pInputText","","aria-describedby","productName-help",3,"ngClass","blur"],["id","productName-help","class","p-invalid",4,"ngIf"],["for","productCodeId"],["id","productCodeId","type","text","placeholder","Code (required)","formControlName","productCode","pInputText","","aria-describedby","productCode-help",3,"ngClass","blur"],["id","productCode-help","class","p-invalid",4,"ngIf"],["for","starRatingId"],["formControlName","starRating","id","starRatingId"],["class","p-invalid",4,"ngIf"],["for","descriptionId"],["id","descriptionId","placeholder","Description","formControlName","description","pInputTextarea","","autoResize","autoResize","aria-describedby","description-help",3,"ngClass","rows","blur"],["id","description-help","class","p-invalid",4,"ngIf"],["pButton","","pRipple","","type","submit","label","Save",3,"disabled"],["pButton","","pRipple","","type","button","label","Cancel",1,"p-button-secondary","p-ml-2",3,"click"],["pButton","","pRipple","","type","button","label","Delete",1,"p-button-danger","p-ml-2","p-mt-2",3,"click"],["id","productName-help",1,"p-invalid"],["id","productCode-help",1,"p-invalid"],[1,"p-invalid"],["id","description-help",1,"p-invalid"]],template:function(e,t){1&e&&($.Tb(0,"div",0),$.Ec(1,he,26,17,"p-card",1),$.Sb()),2&e&&($.Cb(1),$.lc("ngIf",t.selectedProduct))},directives:[W.l,oe.a,ce.p,ce.j,ce.e,ce.a,ce.i,ce.c,se.a,W.j,ie.a,ae.a,V.a],styles:[".edit-container[_ngcontent-%COMP%]{margin-left:20px;margin-bottom:20px}input[_ngcontent-%COMP%]{min-width:250px}@media only screen and (max-width:645px){.edit-container[_ngcontent-%COMP%]{margin-top:10px;margin-left:0}}"]}),e})(),ge=(()=>{class e{constructor(e,t){this.store=e,this.confirmationService=t}ngOnInit(){this.products$=this.store.select(D),this.errorMessage$=this.store.select(J),this.store.dispatch(r.loadProducts()),this.selectedProduct$=this.store.select(L),this.displayCode$=this.store.select(q)}checkChanged(){this.store.dispatch(r.toggleProductCode())}newProduct(){this.store.dispatch(r.initializeCurrentProduct())}productSelected(e){this.store.dispatch(r.setCurrentProduct({currentProductId:e.id}))}deleteProduct(e){this.confirmationService.confirm({message:`Are you sure you want to delete the selected (${e.productName}) product?`,header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.store.dispatch(r.deleteProduct({productId:e.id}))}})}clearProduct(){this.store.dispatch(r.clearCurrentProduct())}saveProduct(e){this.store.dispatch(r.createProduct({product:e}))}updateProduct(e){this.store.dispatch(r.updateProduct({product:e}))}}return e.\u0275fac=function(t){return new(t||e)($.Nb(i.h),$.Nb(z.a))},e.\u0275cmp=$.Hb({type:e,selectors:[["app-product-shell"]],decls:9,vars:18,consts:[[1,"p-d-flex","p-flex-wrap","shell"],[2,"flex","1",3,"displayCode","products","selectedProduct","errorMessage","displayCodeChanged","initializeNewProduct","productWasSelected"],[2,"flex","2",3,"selectedProduct","errorMessage","clearCurrent","update","delete","create"]],template:function(e,t){1&e&&($.Tb(0,"div",0),$.Tb(1,"app-product-list",1),$.ac("displayCodeChanged",function(){return t.checkChanged()})("initializeNewProduct",function(){return t.newProduct()})("productWasSelected",function(e){return t.productSelected(e)}),$.ec(2,"async"),$.ec(3,"async"),$.ec(4,"async"),$.ec(5,"async"),$.Sb(),$.Tb(6,"app-product-edit",2),$.ac("clearCurrent",function(){return t.clearProduct()})("update",function(e){return t.updateProduct(e)})("delete",function(e){return t.deleteProduct(e)})("create",function(e){return t.saveProduct(e)}),$.ec(7,"async"),$.ec(8,"async"),$.Sb(),$.Sb()),2&e&&($.Cb(1),$.lc("displayCode",$.fc(2,6,t.displayCode$))("products",$.fc(3,8,t.products$))("selectedProduct",$.fc(4,10,t.selectedProduct$))("errorMessage",$.fc(5,12,t.errorMessage$)),$.Cb(5),$.lc("selectedProduct",$.fc(7,14,t.selectedProduct$))("errorMessage",$.fc(8,16,t.errorMessage$)))},directives:[te,Pe],pipes:[W.b],styles:[".shell[_ngcontent-%COMP%]{height:calc(100vh - 58px - 58px - 2rem);width:100%}"],changeDetection:0}),e})();var fe=c("ThbA");const me=[{path:"",component:ge}];let Ce=(()=>{class e{}return e.\u0275mod=$.Lb({type:e}),e.\u0275inj=$.Kb({factory:function(t){return new(t||e)},imports:[[s.a,o.e.forChild(me),i.j.forFeature("products",v),I.b.forFeature([G]),fe.a]]}),e})()}}]);